(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2139:function(e,n,t){Promise.resolve().then(t.t.bind(t,3054,23)),Promise.resolve().then(t.bind(t,9630))},9630:function(e,n,t){"use strict";t.d(n,{AuthProvider:function(){return u},a:function(){return c}});var r=t(7437),i=t(2265),l=t(5735),o=t(9842),a=t(9506);let s=(0,i.createContext)({user:null,loading:!0,roleInfo:null,logout:async()=>{},isOverrideAdmin:!1,enableAdminOverride:()=>{}}),u=e=>{let{children:n}=e,[t,u]=(0,i.useState)(null),[c,E]=(0,i.useState)(!0),[I,_]=(0,i.useState)(null),[d,m]=(0,i.useState)(!!localStorage.getItem("overrideAdmin"));async function v(){localStorage.removeItem("overrideAdmin"),a.I.currentUser&&await (0,l.w7)(a.I)}return(0,i.useEffect)(()=>{let e=(0,l.Aj)(a.I,async e=>{u(e);let n=localStorage.getItem("pendingRole");if(e){let t=(0,o.JU)(a.db,"users",e.uid),r=await (0,o.QT)(t);if(r.exists()){let e=r.data();_({role:e.role,studentId:e.studentId,classLevels:e.classLevels})}else n?_({role:n}):_(null)}else _(null);E(!1),n&&localStorage.removeItem("pendingRole")});return()=>e()},[]),(0,r.jsx)(s.Provider,{value:{user:t,loading:c,roleInfo:I||(d?{role:"admin"}:null),logout:v,isOverrideAdmin:d,enableAdminOverride:function(){localStorage.setItem("overrideAdmin","true"),m(!0),_({role:"admin"})}},children:n})},c=()=>(0,i.useContext)(s)},9506:function(e,n,t){"use strict";let r;t.d(n,{I:function(){return E},db:function(){return d}});var i=t(5236),l=t(5735),o=t(9842),a=t(9854),s=t(357);let u={apiKey:s.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyD239JqpspNL_KN7-buMq2PTWUM5P0D5YA",authDomain:s.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"milliniem-86b63.firebaseapp.com",projectId:s.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"milliniem-86b63",storageBucket:s.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"milliniem-86b63.appspot.com",messagingSenderId:s.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"455693438371",appId:s.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:455693438371:web:0a64c5c007cb906e241e16",measurementId:s.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-KHHJRMKW9V"},c=(0,i.C6)().length?(0,i.C6)()[0]:(0,i.ZF)(u),E=(0,l.v0)(c),I="true"===s.env.NEXT_PUBLIC_FIRESTORE_FORCE_LONG_POLLING,_="true"===s.env.NEXT_PUBLIC_FIRESTORE_AUTODETECT_STREAMING;try{I||_?(r=(0,o.LV)(c,{experimentalForceLongPolling:I,experimentalAutoDetectLongPolling:_}),console.log("[firebase] Firestore initialized with options",{forceLongPolling:I,autoDetect:_})):r=(0,o.ad)(c)}catch(e){console.error("[firebase] Firestore init error, falling back to default",e),r=(0,o.ad)(c)}let d=r;(0,a.cF)(c)},3054:function(){}},function(e){e.O(0,[141,358,139,712,971,23,744],function(){return e(e.s=2139)}),_N_E=e.O()}]);