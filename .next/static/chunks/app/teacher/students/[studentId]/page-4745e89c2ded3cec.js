(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{9284:function(e,t,a){Promise.resolve().then(a.bind(a,9455))},9455:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7437),n=a(6463),s=a(2265),l=a(4819),i=a(7374),d=a(9783),o=a(9630),c=a(3265),u=a(2469),m=a(4192),x=a(3673),p=a(8726);function h(){return(0,r.jsx)(l.Z,{allowed:["teacher","admin"],children:(0,r.jsx)(g,{})})}function g(){let{studentId:e}=(0,n.useParams)(),{roleInfo:t}=(0,o.a)(),a=(0,n.useRouter)(),[l,h]=(0,s.useState)(null),[g,f]=(0,s.useState)({}),[b,y]=(0,s.useState)(new Date),[N,v]=(0,s.useState)({}),[j,w]=(0,s.useState)(!1),[E,A]=(0,s.useState)("term1"),[_,S]=(0,s.useState)([]),[I,C]=(0,s.useState)(!1),[D,P]=(0,s.useState)(!1),[L,U]=(0,s.useState)(!0),B=(0,s.useMemo)(()=>(0,c.WU)(b,"yyyy-MM"),[b]);async function T(){if(e){w(!0);try{await (0,i.Gc)(e,{name:g.name||"",class:g.class||"",rollNumber:g.rollNumber||"",parentEmail:g.parentEmail,parentPhone:g.parentPhone}),p.ZP.success("Student updated")}catch(e){p.ZP.error("Update failed")}finally{w(!1)}}}async function R(t){if(!e)return;let a=!!N[t];try{await (0,i._l)(e,t,!a),v(e=>({...e,[t]:!a}))}catch(e){p.ZP.error("Attendance update failed")}}function k(e,t,a){S(r=>r.map((r,n)=>n===e?{...r,[t]:a}:r))}async function M(){e&&(await (0,i.iM)(e,E,_),p.ZP.success("Results saved"))}async function O(t){var a;if(!l||!e)return;let r=!!(null===(a=l.feeStatus)||void 0===a?void 0:a[t]);await (0,i.y7)(e,t,!r),h(e=>e?{...e,feeStatus:{...e.feeStatus||{term1:!1,term2:!1,term3:!1},[t]:!r}}:e)}async function F(){if(e&&t&&"admin"===t.role)try{P(!0);let a="".concat(window.location.origin,"/student-id/").concat(e),r=await d.toDataURL(a,{width:200,margin:2,color:{dark:"#6556ff",light:"#ffffff"}}),n=new Date,s=(null==t?void 0:t.uid)||(null==l?void 0:l.registeredByUid)||"admin",o={generatedAt:n,generatedBy:s};await (0,i.Gc)(e,{qrCode:r,qrGeneratedAt:n,qrGeneratedBy:s,qrHistory:[...(null==l?void 0:l.qrHistory)||[],o]}),h(e=>e?{...e,qrCode:r,qrGeneratedAt:n,qrGeneratedBy:s,qrHistory:[...e.qrHistory||[],o]}:e),p.ZP.success("QR generated")}catch(e){p.ZP.error("QR generation failed")}finally{P(!1)}}return(0,s.useEffect)(()=>{(async()=>{if(!e)return;U(!0);let t=await (0,i.KD)(e);if(!t){U(!1);return}h(t),f({name:t.name,class:t.class,rollNumber:t.rollNumber,parentEmail:t.parentEmail,parentPhone:t.parentPhone}),v(await (0,i.BM)(e,b.getFullYear(),b.getMonth()+1)),U(!1)})()},[e,B]),(0,s.useEffect)(()=>{(async()=>{if(!e)return;C(!0);let t=await (0,i.O7)(e,E);S((null==t?void 0:t.subjects)||[]),C(!1)})()},[e,E]),L?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("p",{children:"Loading..."})}):l?(0,r.jsx)("div",{className:"min-h-screen bg-slateGray py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[l.photoUrl&&(0,r.jsx)("img",{src:l.photoUrl,className:"w-24 h-24 rounded object-cover"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-midnight_text",children:l.name}),(0,r.jsxs)("p",{className:"text-grey text-sm",children:["ID: ",l.id]}),(0,r.jsxs)("p",{className:"text-grey text-sm",children:["Class: ",l.class]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>a.push("/teacher/students"),className:"px-4 py-2 rounded border border-gray-300 bg-white hover:bg-gray-50 text-sm",children:"Back"}),(0,r.jsx)("button",{onClick:T,disabled:j,className:"btn btn-primary text-sm",children:j?"Saving...":"Save"})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"md:col-span-2 space-y-8",children:[(0,r.jsxs)("section",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,r.jsx)("h2",{className:"font-semibold text-midnight_text",children:"Edit Profile"}),(0,r.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-grey block mb-1",children:"Name"}),(0,r.jsx)("input",{value:g.name||"",onChange:e=>f(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-grey block mb-1",children:"Class"}),(0,r.jsx)("input",{value:g.class||"",onChange:e=>f(t=>({...t,class:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-grey block mb-1",children:"Roll Number"}),(0,r.jsx)("input",{value:g.rollNumber||"",onChange:e=>f(t=>({...t,rollNumber:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-grey block mb-1",children:"Parent Email"}),(0,r.jsx)("input",{value:g.parentEmail||"",onChange:e=>f(t=>({...t,parentEmail:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-grey block mb-1",children:"Parent Phone"}),(0,r.jsx)("input",{value:g.parentPhone||"",onChange:e=>f(t=>({...t,parentPhone:e.target.value})),className:"w-full px-3 py-2 border rounded"})]})]})]}),(0,r.jsxs)("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsxs)("h2",{className:"font-semibold text-midnight_text",children:["Attendance - ",(0,c.WU)(b,"MMMM yyyy")]}),(0,r.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>y(e=>new Date(e.getFullYear(),e.getMonth()-1,1)),className:"px-2 py-1 border rounded",children:"<"}),(0,r.jsx)("button",{onClick:()=>y(e=>new Date(e.getFullYear(),e.getMonth()+1,1)),className:"px-2 py-1 border rounded",children:">"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-2",children:(function(){let e=(0,u.N)(b),t=(0,m.V)(b);return(0,x.D)({start:e,end:t})})().map(e=>{let t=(0,c.WU)(e,"yyyy-MM-dd"),a=N[t];return(0,r.jsx)("button",{type:"button",onClick:()=>R(t),className:"h-12 rounded border text-sm font-medium transition ".concat(a?"bg-green-500 text-black border-green-500":"bg-gray-50 hover:bg-gray-100 text-gray-500 border-gray-300"),children:(0,c.WU)(e,"dd")},t)})})]}),(0,r.jsxs)("section",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("h2",{className:"font-semibold text-midnight_text",children:"Results"}),(0,r.jsxs)("select",{value:E,onChange:e=>A(e.target.value),className:"ml-auto px-3 py-2 border rounded text-sm",children:[(0,r.jsx)("option",{value:"term1",children:"Term 1"}),(0,r.jsx)("option",{value:"term2",children:"Term 2"}),(0,r.jsx)("option",{value:"term3",children:"Term 3"})]}),(0,r.jsx)("button",{onClick:function(){S(e=>[...e,{name:"",grade:""}])},className:"px-3 py-2 border rounded text-sm",children:"Add Subject"}),(0,r.jsx)("button",{onClick:M,className:"btn btn-primary text-sm",children:"Save Results"})]}),I?(0,r.jsx)("p",{className:"text-sm text-grey",children:"Loading results..."}):(0,r.jsxs)("div",{className:"space-y-3",children:[0===_.length&&(0,r.jsx)("p",{className:"text-xs text-grey",children:"No subjects yet. Add one."}),_.map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{value:e.name,onChange:e=>k(t,"name",e.target.value),placeholder:"Subject",className:"flex-1 px-3 py-2 border rounded text-sm"}),(0,r.jsx)("input",{value:e.grade,onChange:e=>k(t,"grade",e.target.value),placeholder:"Grade",className:"w-28 px-3 py-2 border rounded text-sm"}),(0,r.jsx)("button",{onClick:()=>{S(e=>e.filter((e,a)=>a!==t))},className:"px-2 py-2 border rounded text-xs",children:"\xd7"})]},t))]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("section",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-3",children:[(0,r.jsx)("h2",{className:"font-semibold text-midnight_text",children:"QR / Meta"}),l.qrCode?(0,r.jsx)("img",{src:l.qrCode,className:"w-40 h-40 object-contain"}):(0,r.jsx)("p",{className:"text-xs text-grey",children:"No QR generated."}),!l.qrCode&&(null==t?void 0:t.role)==="admin"&&(0,r.jsx)("button",{disabled:D,onClick:F,className:"px-3 py-2 border rounded text-xs w-fit",children:D?"Generating...":"Generate QR"}),(0,r.jsxs)("p",{className:"text-xs text-grey",children:["Created: ",l.createdAt.toLocaleDateString()]}),(0,r.jsxs)("p",{className:"text-xs text-grey",children:["Updated: ",l.updatedAt.toLocaleDateString()]}),l.qrGeneratedAt&&(0,r.jsxs)("p",{className:"text-xs text-grey",children:["QR Last Gen: ",l.qrGeneratedAt.toLocaleDateString()," by ",l.qrGeneratedBy]}),(0,r.jsxs)("div",{className:"pt-2 border-t border-gray-100",children:[(0,r.jsx)("p",{className:"text-[11px] text-grey",children:"Parent Login Passcode / Student ID:"}),(0,r.jsx)("p",{className:"font-mono text-xs text-midnight_text bg-gray-50 px-2 py-1 rounded border w-fit mt-1",children:l.id})]})]}),(0,r.jsxs)("section",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-3",children:[(0,r.jsx)("h2",{className:"font-semibold text-midnight_text",children:"Fee Status"}),["term1","term2","term3"].map(e=>{var t;let a=!!(null===(t=l.feeStatus)||void 0===t?void 0:t[e]);return(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"capitalize",children:e}),(0,r.jsx)("button",{onClick:()=>O(e),className:"px-3 py-1 rounded border text-xs font-medium ".concat(a?"bg-green-500 text-black border-green-500":"bg-gray-100 text-gray-600 border-gray-300"),children:a?"Paid":"Unpaid"})]},e)})]})]})]})]})}):(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[(0,r.jsx)("p",{className:"text-sm",children:"Student not found."}),(0,r.jsx)("button",{onClick:()=>a.push("/teacher/students"),className:"btn btn-primary",children:"Back"})]})}},4819:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(7437),n=a(2265),s=a(6463),l=a(9630);function i(e){let{allowed:t,children:a}=e,{loading:i,roleInfo:d,isOverrideAdmin:o}=(0,l.a)(),c=(0,s.useRouter)(),u=(null==d?void 0:d.role)||(o?"admin":null);return((0,n.useEffect)(()=>{i||u&&t.includes(u)||c.replace("/login")},[i,u,t,c]),i)?(0,r.jsx)("p",{className:"text-center py-10 text-white/80",children:"Loading..."}):u&&t.includes(u)?(0,r.jsx)(r.Fragment,{children:a}):null}},9630:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return o},a:function(){return c}});var r=a(7437),n=a(2265),s=a(5735),l=a(9842),i=a(9506);let d=(0,n.createContext)({user:null,loading:!0,roleInfo:null,logout:async()=>{},isOverrideAdmin:!1,enableAdminOverride:()=>{}}),o=e=>{let{children:t}=e,[a,o]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0),[m,x]=(0,n.useState)(null),[p,h]=(0,n.useState)(!!localStorage.getItem("overrideAdmin"));async function g(){localStorage.removeItem("overrideAdmin"),i.I.currentUser&&await (0,s.w7)(i.I)}return(0,n.useEffect)(()=>{let e=(0,s.Aj)(i.I,async e=>{o(e);let t=localStorage.getItem("pendingRole");if(e){let a=(0,l.JU)(i.db,"users",e.uid),r=await (0,l.QT)(a);if(r.exists()){let e=r.data();x({role:e.role,studentId:e.studentId,classLevels:e.classLevels})}else t?x({role:t}):x(null)}else x(null);u(!1),t&&localStorage.removeItem("pendingRole")});return()=>e()},[]),(0,r.jsx)(d.Provider,{value:{user:a,loading:c,roleInfo:m||(p?{role:"admin"}:null),logout:g,isOverrideAdmin:p,enableAdminOverride:function(){localStorage.setItem("overrideAdmin","true"),h(!0),x({role:"admin"})}},children:t})},c=()=>(0,n.useContext)(d)},7374:function(e,t,a){"use strict";a.d(t,{BM:function(){return N},Gc:function(){return u},KD:function(){return d},O7:function(){return j},QN:function(){return f},Wv:function(){return h},YF:function(){return m},_8:function(){return o},_l:function(){return y},b0:function(){return c},iM:function(){return v},l6:function(){return g},tS:function(){return p},y7:function(){return b}});var r=a(9506),n=a(9842),s=a(2107),l=a(9783),i=a(357);async function d(e){try{var t,a;let s=await (0,n.QT)((0,n.JU)(r.db,"students",e));if(!s.exists())return null;let l=s.data(),i=l.name||[l.firstName,l.lastName].filter(Boolean).join(" ").trim();return{id:s.id,name:i,firstName:l.firstName,lastName:l.lastName,class:l.class||l.classLevel||"",classLevel:l.classLevel,email:l.email,age:l.age||0,rollNumber:l.rollNumber||l.id||"",parentPhone:l.parentPhone,parentEmail:l.parentEmail,photoUrl:l.photoUrl,qrCode:l.qrCode,registeredBy:l.registeredBy||"admin",registeredByUid:l.registeredByUid||l.createdBy||"",feeStatus:l.feeStatus||{term1:!1,term2:!1,term3:!1},createdAt:(null===(t=l.createdAt)||void 0===t?void 0:t.toDate)?l.createdAt.toDate():l.createdAt?new Date(l.createdAt):new Date,updatedAt:(null===(a=l.updatedAt)||void 0===a?void 0:a.toDate)?l.updatedAt.toDate():l.updatedAt?new Date(l.updatedAt):new Date}}catch(e){return console.error("Error fetching student:",e),null}}async function o(e){try{let t=(0,n.IO)((0,n.hJ)(r.db,"students"),(0,n.ar)("class","==",e),(0,n.Xo)("name"));return(await (0,n.PL)(t)).docs.map(e=>{var t,a;return{...e.data(),id:e.id,createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(a=e.data().updatedAt)||void 0===a?void 0:a.toDate())||new Date}})}catch(e){return console.error("Error fetching students by class:",e),[]}}async function c(e){try{let t=(await (0,n.PL)((0,n.hJ)(r.db,"students"))).docs.map(e=>{var t,a;let r=e.data(),n=r.name||[r.firstName,r.lastName].filter(Boolean).join(" ").trim();return{id:e.id,name:n,firstName:r.firstName,lastName:r.lastName,class:r.class||r.classLevel||"",classLevel:r.classLevel,email:r.email,age:r.age||0,rollNumber:r.rollNumber||e.id,parentPhone:r.parentPhone,parentEmail:r.parentEmail,photoUrl:r.photoUrl,qrCode:r.qrCode,registeredBy:r.registeredBy||"admin",registeredByUid:r.registeredByUid||r.createdBy||"",feeStatus:r.feeStatus||{term1:!1,term2:!1,term3:!1},createdAt:(null===(t=r.createdAt)||void 0===t?void 0:t.toDate)?r.createdAt.toDate():r.createdAt?new Date(r.createdAt):new Date,updatedAt:(null===(a=r.updatedAt)||void 0===a?void 0:a.toDate)?r.updatedAt.toDate():r.updatedAt?new Date(r.updatedAt):new Date}}),a=e.toLowerCase();return t.filter(e=>e.name.toLowerCase().includes(a)||e.rollNumber.toLowerCase().includes(a))}catch(e){return console.error("Error searching students:",e),[]}}async function u(e,t){try{let a={...t,updatedAt:new Date};if(t.name&&!t.firstName&&!t.lastName){let e=t.name.split(" ");e.length>1&&(a.firstName=e.slice(0,-1).join(" "),a.lastName=e.slice(-1).join(" "))}await (0,n.r7)((0,n.JU)(r.db,"students",e),a)}catch(e){throw console.error("Error updating student:",e),e}}async function m(e,t,a,s){try{let l=(0,n.JU)((0,n.hJ)(r.db,"attendance")),i={id:l.id,studentId:e,date:t,status:a,markedBy:s,markedAt:new Date};await (0,n.pl)(l,i)}catch(e){throw console.error("Error marking attendance:",e),e}}async function x(e){let t=new Date().getFullYear();return"".concat(e.replace(/\s+/g,"").toUpperCase(),"-").concat(t,"-").concat(Math.floor(1e3+9e3*Math.random()))}async function p(e){let t;let a=await x(e.classLevel);if(e.photoFile){var d;let r=e.photoFile;if(!["image/jpeg","image/jpg","image/png"].includes(r.type))throw Error("VALIDATION_UNSUPPORTED_TYPE");if(r.size>5242880)throw Error("VALIDATION_FILE_TOO_LARGE");let n=await (0,s.Z)(r,{maxSizeMB:.25,maxWidthOrHeight:600}),l=n instanceof Blob?n:new Blob([n]),o=new FormData;o.append("image",l,"".concat(a,".jpg"));let c=i.env.NEXT_PUBLIC_IMGBB_KEY||"eb795bdf868353332baf6495a1a83fa0",u=await fetch("https://api.imgbb.com/1/upload?key=".concat(c),{method:"POST",body:o}),m=await u.json();if(!u.ok||!(null==m?void 0:m.success))throw Error("IMGBB_UPLOAD_FAILED");if(!(t=null===(d=m.data)||void 0===d?void 0:d.url))throw Error("IMGBB_NO_URL_RETURNED")}let{photoFile:o,...c}=e,u={...c,id:a,photoUrl:t,feeStatus:{term1:!1,term2:!1,term3:!1},createdAt:Date.now()};await (0,n.pl)((0,n.JU)(r.db,"students",a),u);let m=window.location.origin;return{student:u,qrDataUrl:await l.toDataURL("".concat(m,"/id/").concat(a)),password:a}}async function h(e){let t=await (0,n.QT)((0,n.JU)(r.db,"students",e));return t.exists()?t.data():null}async function g(e){let t=(0,n.hJ)(r.db,"students"),a=await (0,n.PL)(t),s=e.toLowerCase();return a.docs.map(e=>({...e.data(),id:e.data().id||e.id})).filter(e=>(e.firstName||"").toLowerCase().includes(s)||(e.lastName||"").toLowerCase().includes(s)||(e.id||"").toLowerCase().includes(s))}async function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,a=(0,n.hJ)(r.db,"students"),s=(0,n.IO)(a,(0,n.Xo)("createdAt","desc"),(0,n.b9)(e));t&&(s=(0,n.IO)(a,(0,n.Xo)("createdAt","desc"),(0,n.TQ)(t),(0,n.b9)(e)));let l=await (0,n.PL)(s);return{students:l.docs.map(e=>({...e.data(),id:e.data().id||e.id})),cursor:l.docs.length===e?l.docs[l.docs.length-1]:null}}async function b(e,t,a){await (0,n.r7)((0,n.JU)(r.db,"students",e),{["feeStatus.".concat(t)]:a})}async function y(e,t,a){if(isNaN(new Date(t).getTime()))throw Error("Invalid date");let s=t.slice(0,7),l=(0,n.JU)(r.db,"students",e,"attendance",s),i=await (0,n.QT)(l),d=i.exists()&&i.data().days||{};d[t]=a,await (0,n.pl)(l,{days:d},{merge:!0})}async function N(e,t,a){let s="".concat(t,"-").concat(String(a).padStart(2,"0")),l=(0,n.JU)(r.db,"students",e,"attendance",s),i=await (0,n.QT)(l);return i.exists()&&i.data().days||{}}async function v(e,t,a){await (0,n.pl)((0,n.JU)(r.db,"students",e,"results",t),{subjects:a,updatedAt:Date.now()})}async function j(e,t){let a=await (0,n.QT)((0,n.JU)(r.db,"students",e,"results",t));return a.exists()?a.data():null}},9506:function(e,t,a){"use strict";let r;a.d(t,{I:function(){return u},db:function(){return p}});var n=a(5236),s=a(5735),l=a(9842),i=a(9854),d=a(357);let o={apiKey:d.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyD239JqpspNL_KN7-buMq2PTWUM5P0D5YA",authDomain:d.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"milliniem-86b63.firebaseapp.com",projectId:d.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"milliniem-86b63",storageBucket:d.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"milliniem-86b63.appspot.com",messagingSenderId:d.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"455693438371",appId:d.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:455693438371:web:0a64c5c007cb906e241e16",measurementId:d.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-KHHJRMKW9V"},c=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)(o),u=(0,s.v0)(c),m="true"===d.env.NEXT_PUBLIC_FIRESTORE_FORCE_LONG_POLLING,x="true"===d.env.NEXT_PUBLIC_FIRESTORE_AUTODETECT_STREAMING;try{m||x?(r=(0,l.LV)(c,{experimentalForceLongPolling:m,experimentalAutoDetectLongPolling:x}),console.log("[firebase] Firestore initialized with options",{forceLongPolling:m,autoDetect:x})):r=(0,l.ad)(c)}catch(e){console.error("[firebase] Firestore init error, falling back to default",e),r=(0,l.ad)(c)}let p=r;(0,i.cF)(c)}},function(e){e.O(0,[358,139,712,873,749,726,971,23,744],function(){return e(e.s=9284)}),_N_E=e.O()}]);