(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{2395:function(e,s,t){Promise.resolve().then(t.bind(t,6121))},6463:function(e,s,t){"use strict";var a=t(1169);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},6121:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),r=t(2265),l=t(9842),i=t(9506),n=t(5737),c=t(6463);function d(){let e=(0,c.useParams)(),s=null==e?void 0:e.studentId,[t,d]=(0,r.useState)(null),[o,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)("");return((0,r.useEffect)(()=>{(async()=>{if(!s){h("Invalid student ID"),m(!1);return}try{let a=await (0,l.QT)((0,l.JU)(i.db,"students",s));if(a.exists()){var e,t;let s=a.data();d({...s,id:a.id,createdAt:(null===(e=s.createdAt)||void 0===e?void 0:e.toDate())||new Date,updatedAt:(null===(t=s.updatedAt)||void 0===t?void 0:t.toDate())||new Date})}else h("Student not found")}catch(e){h("Failed to load student information"),console.error("Error fetching student:",e)}finally{m(!1)}})()},[s]),o)?(0,a.jsx)("div",{className:"min-h-screen bg-slateGray flex items-center justify-center",children:(0,a.jsxs)("div",{className:"card p-8 text-center",children:[(0,a.jsx)("i",{className:"fas fa-spinner fa-spin text-primary text-2xl mb-4"}),(0,a.jsx)("p",{className:"text-midnight_text",children:"Loading student information..."})]})}):x||!t?(0,a.jsx)("div",{className:"min-h-screen bg-slateGray flex items-center justify-center",children:(0,a.jsxs)("div",{className:"card p-8 text-center max-w-md",children:[(0,a.jsx)("i",{className:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-midnight_text mb-2",children:"Student Not Found"}),(0,a.jsx)("p",{className:"text-grey mb-4",children:x}),(0,a.jsxs)("button",{onClick:()=>window.history.back(),className:"btn btn-primary",children:[(0,a.jsx)("i",{className:"fas fa-arrow-left"}),"Go Back"]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-primary mb-2",children:"Millenium School"}),(0,a.jsx)("p",{className:"text-lg text-midnight_text",children:"Official Student ID Card"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border-4 border-primary/20",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-primary to-secondary px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-white",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Student ID Card"}),(0,a.jsx)("p",{className:"opacity-90",children:"Academic Year 2024-2025"})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"bg-white/20 rounded-lg px-4 py-2",children:[(0,a.jsx)("p",{className:"text-sm opacity-90",children:"Roll Number"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:t.rollNumber})]})})]})}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-8 items-start",children:[(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsxs)("div",{className:"relative",children:[t.photoUrl?(0,a.jsx)("img",{src:t.photoUrl,alt:t.name,className:"w-full aspect-square rounded-2xl object-cover border-4 border-primary/20 shadow-lg"}):(0,a.jsx)("div",{className:"w-full aspect-square bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center border-4 border-gray-200 shadow-lg",children:(0,a.jsx)("i",{className:"fas fa-user text-gray-400 text-6xl"})}),(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center border-2 border-primary",children:(0,a.jsx)("i",{className:"fas fa-graduation-cap text-primary text-lg"})})]})}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-midnight_text mb-2",children:t.name}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-1",children:[(0,a.jsx)("i",{className:"fas fa-graduation-cap"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Class"})]}),(0,a.jsx)("p",{className:"text-lg font-semibold text-midnight_text",children:t.class})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-1",children:[(0,a.jsx)("i",{className:"fas fa-birthday-cake"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Age"})]}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-midnight_text",children:[t.age," years"]})]})]})]})}),(t.parentPhone||t.parentEmail)&&(0,a.jsxs)("div",{className:"bg-primary/5 rounded-lg p-4",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-midnight_text mb-3 flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fas fa-users text-primary"}),"Parent Contact"]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[t.parentPhone&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("i",{className:"fas fa-phone text-success w-4"}),(0,a.jsx)("span",{className:"text-midnight_text",children:t.parentPhone})]}),t.parentEmail&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("i",{className:"fas fa-envelope text-success w-4"}),(0,a.jsx)("span",{className:"text-midnight_text",children:t.parentEmail})]})]})]}),t.qrCode&&(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-midnight_text mb-1",children:"Digital Verification"}),(0,a.jsx)("p",{className:"text-sm text-grey",children:"Scan QR code to verify student identity"})]}),(0,a.jsx)("img",{src:t.qrCode,alt:"Student QR Code",className:"w-16 h-16 border border-primary/20 rounded-lg"})]})]})]}),(0,a.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-grey",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["Issued on: ",t.createdAt.toLocaleDateString()]}),(0,a.jsxs)("p",{children:["Registered by: ",t.registeredBy.charAt(0).toUpperCase()+t.registeredBy.slice(1)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-primary",children:"Millenium School Portal"}),(0,a.jsx)("p",{children:"Official Student Record"})]})]})})]})]}),(0,a.jsxs)("div",{className:"text-center mt-8 space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>window.print(),className:"btn btn-primary",children:[(0,a.jsx)("i",{className:"fas fa-print"}),"Print ID Card"]}),(0,a.jsxs)("button",{onClick:()=>window.history.back(),className:"btn btn-outline",children:[(0,a.jsx)("i",{className:"fas fa-arrow-left"}),"Go Back"]}),(0,a.jsxs)("a",{href:"/parent/library",className:"btn outline",children:[(0,a.jsx)("i",{className:"fas fa-book-open"}),"Digital Library"]})]}),(0,a.jsxs)("div",{className:"mt-16",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-midnight_text mb-4 flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fas fa-book text-primary"}),"Explore Our Digital Library"]}),(0,a.jsx)("p",{className:"text-sm text-grey mb-6",children:"Boost knowledge with free public domain books. Search and read instantly below or open the full library."}),(0,a.jsx)("div",{className:"border border-primary/10 rounded-xl bg-white/60 backdrop-blur-sm p-4",children:(0,a.jsx)(n.Z,{})})]})]})})}},5737:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(7437),r=t(2265);let l=["Mathematics","English","Science","History"];function i(){var e,s;let[t,i]=(0,r.useState)(""),[n,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)([]),[m,x]=(0,r.useState)(null),[h,u]=(0,r.useState)(null),[f,p]=(0,r.useState)(null),b=async e=>{c(!0),x(null);try{let s="https://gutendex.com/books/?search=".concat(encodeURIComponent(e)),t=await fetch(s);if(!t.ok)throw Error("Failed to fetch books");let a=await t.json();o(a.results||[])}catch(e){x(e.message||"Unknown error")}finally{c(!1)}},g=async e=>{c(!0),x(null);try{let s="https://gutendex.com/books/?search=".concat(encodeURIComponent(e)),t=await fetch(s);if(!t.ok)throw Error("Failed to fetch subject books");let a=await t.json();o(a.results||[]),u(e)}catch(e){x(e.message)}finally{c(!1)}},j=e=>{p(e)};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.trim()&&(u(null),b(t.trim()))},className:"flex w-full max-w-lg gap-2",children:[(0,a.jsx)("input",{value:t,onChange:e=>i(e.target.value),placeholder:"Search title, author, subject...",className:"flex-1 px-4 py-2 rounded border border-gray-300 text-sm"}),(0,a.jsx)("button",{className:"btn",type:"submit",disabled:!t.trim()||n,children:"Search"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[l.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>g(e),className:"px-3 py-1 rounded text-xs border ".concat(h===e?"bg-primary text-white border-primary":"border-gray-300 text-gray-600 hover:bg-gray-100"),children:e},e)),h&&(0,a.jsx)("button",{type:"button",onClick:()=>{u(null),o([])},className:"text-xs underline text-gray-500",children:"Clear"})]})]}),m&&(0,a.jsx)("div",{className:"text-sm text-red-600",children:m}),n&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Loading books..."}),!n&&0===d.length&&!m&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"No books yet. Try searching or pick a subject."}),(0,a.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:d.map(e=>{var s,t;let r=e.formats["image/jpeg"],l=e.formats["text/html"],i=e.formats["application/epub+zip"],n=e.formats["application/pdf"],c=(null===(t=e.authors)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.name)||"Unknown Author";return(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white flex flex-col overflow-hidden shadow-sm",children:[r?(0,a.jsx)("img",{src:r,alt:e.title,className:"h-40 w-full object-cover"}):(0,a.jsx)("div",{className:"h-40 w-full bg-gray-100 flex items-center justify-center text-gray-400 text-xs",children:"No Cover"}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 p-4 gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm line-clamp-2 leading-snug",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 line-clamp-1",children:c}),(0,a.jsxs)("div",{className:"mt-auto flex flex-wrap gap-2 pt-2",children:[l&&(0,a.jsx)("button",{type:"button",onClick:()=>j(e),className:"btn outline text-xs",children:"Read Online"}),(i||n)&&(0,a.jsx)("a",{href:i||n,target:"_blank",rel:"noopener noreferrer",className:"btn outline text-xs",children:"Download"})]})]})]},e.id)})}),f&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-5xl rounded-lg shadow-lg flex flex-col max-h-[90vh]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-semibold text-sm",children:f.title}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:(null===(s=f.authors)||void 0===s?void 0:null===(e=s[0])||void 0===e?void 0:e.name)||"Unknown Author"})]}),(0,a.jsx)("button",{onClick:()=>p(null),className:"text-xs px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",children:"Close"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:f.formats["text/html"]?(0,a.jsx)("iframe",{src:f.formats["text/html"],title:f.title,className:"w-full h-[70vh]"}):(0,a.jsx)("div",{className:"p-6 text-sm",children:"No embeddable HTML version available for this title."})})]})})]})}},9506:function(e,s,t){"use strict";let a;t.d(s,{I:function(){return m},db:function(){return u}});var r=t(5236),l=t(5735),i=t(9842),n=t(9854),c=t(357);let d={apiKey:c.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyD239JqpspNL_KN7-buMq2PTWUM5P0D5YA",authDomain:c.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"milliniem-86b63.firebaseapp.com",projectId:c.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"milliniem-86b63",storageBucket:c.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"milliniem-86b63.appspot.com",messagingSenderId:c.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"455693438371",appId:c.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:455693438371:web:0a64c5c007cb906e241e16",measurementId:c.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-KHHJRMKW9V"},o=(0,r.C6)().length?(0,r.C6)()[0]:(0,r.ZF)(d),m=(0,l.v0)(o),x="true"===c.env.NEXT_PUBLIC_FIRESTORE_FORCE_LONG_POLLING,h="true"===c.env.NEXT_PUBLIC_FIRESTORE_AUTODETECT_STREAMING;try{x||h?(a=(0,i.LV)(o,{experimentalForceLongPolling:x,experimentalAutoDetectLongPolling:h}),console.log("[firebase] Firestore initialized with options",{forceLongPolling:x,autoDetect:h})):a=(0,i.ad)(o)}catch(e){console.error("[firebase] Firestore init error, falling back to default",e),a=(0,i.ad)(o)}let u=a;(0,n.cF)(o)}},function(e){e.O(0,[358,139,712,971,23,744],function(){return e(e.s=2395)}),_N_E=e.O()}]);