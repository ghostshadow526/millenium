"use strict";(()=>{var e={};e.id=485,e.ids=[485],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},58060:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>c,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{POST:()=>u});var i=r(49303),s=r(88716),o=r(60670),n=r(87070);async function u(e){try{let t;let{file:r,fileName:a}=await e.json();if(!r||!a)return n.NextResponse.json({error:"Missing file or fileName"},{status:400});let i=process.env.IMAGEKIT_PRIVATE_KEY;if(!i)return n.NextResponse.json({error:"Server missing IMAGEKIT_PRIVATE_KEY"},{status:500});let s="Basic "+Buffer.from(i+":").toString("base64"),o=new FormData;o.append("file",r),o.append("fileName",a),o.append("useUniqueFileName","true");let u=await fetch("https://upload.imagekit.io/api/v1/files/upload",{method:"POST",headers:{Authorization:s},body:o}),p=await u.text();if(!u.ok)return n.NextResponse.json({error:"ImageKit upload failed",details:p.slice(0,500)},{status:u.status});try{t=JSON.parse(p)}catch{return n.NextResponse.json({error:"Invalid JSON from ImageKit",raw:p.slice(0,300)},{status:502})}return n.NextResponse.json({url:t.url,thumbnailUrl:t.thumbnailUrl,width:t.width,height:t.height,fileId:t.fileId})}catch(e){return n.NextResponse.json({error:e.message||"Unexpected error"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/imagekit/upload/route",pathname:"/api/imagekit/upload",filename:"route",bundlePath:"app/api/imagekit/upload/route"},resolvedPagePath:"C:\\Users\\DELL\\Documents\\E-learning-1.0.0\\portal-app\\src\\app\\api\\imagekit\\upload\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m}=p,c="/api/imagekit/upload/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,972],()=>r(58060));module.exports=a})();