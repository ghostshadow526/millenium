exports.id=60,exports.ids=[60],exports.modules={59524:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},17404:(e,t,a)=>{Promise.resolve().then(a.bind(a,94001))},94001:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>d,a:()=>c});var r=a(10326),s=a(17577),n=a(46791),i=a(76),o=a(90445);let l=(0,s.createContext)({user:null,loading:!0,roleInfo:null,logout:async()=>{},isOverrideAdmin:!1,enableAdminOverride:()=>{}}),d=({children:e})=>{let[t,a]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(!1);async function E(){o.I.currentUser&&await (0,n.w7)(o.I)}return(0,s.useEffect)(()=>{let e=(0,n.Aj)(o.I,async e=>{if(a(e),e){let t=(0,i.JU)(o.db,"users",e.uid),a=await (0,i.QT)(t);if(a.exists()){let e=a.data();m({role:e.role,studentId:e.studentId,classLevels:e.classLevels})}else m(null)}else m(null);c(!1)});return()=>e()},[]),r.jsx(l.Provider,{value:{user:t,loading:d,roleInfo:u||(p?{role:"admin"}:null),logout:E,isOverrideAdmin:p,enableAdminOverride:function(){h(!0),m({role:"admin"})}},children:e})},c=()=>(0,s.useContext)(l)},64676:(e,t,a)=>{"use strict";a.d(t,{Gc:()=>d,QN:()=>E,Wv:()=>p,YF:()=>c,_8:()=>o,_l:()=>w,b0:()=>l,iM:()=>A,l6:()=>h,tS:()=>m,y7:()=>f});var r=a(90445),s=a(76),n=a(8806),i=a(31270);async function o(e){try{let t=(0,s.IO)((0,s.hJ)(r.db,"students"),(0,s.ar)("class","==",e),(0,s.Xo)("name"));return(await (0,s.PL)(t)).docs.map(e=>({...e.data(),id:e.id,createdAt:e.data().createdAt?.toDate()||new Date,updatedAt:e.data().updatedAt?.toDate()||new Date}))}catch(e){return console.error("Error fetching students by class:",e),[]}}async function l(e){try{let t=(await (0,s.PL)((0,s.hJ)(r.db,"students"))).docs.map(e=>{let t=e.data(),a=t.name||[t.firstName,t.lastName].filter(Boolean).join(" ").trim();return{id:e.id,name:a,firstName:t.firstName,lastName:t.lastName,class:t.class||t.classLevel||"",classLevel:t.classLevel,email:t.email,age:t.age||0,rollNumber:t.rollNumber||e.id,parentPhone:t.parentPhone,parentEmail:t.parentEmail,photoUrl:t.photoUrl,qrCode:t.qrCode,registeredBy:t.registeredBy||"admin",registeredByUid:t.registeredByUid||t.createdBy||"",feeStatus:t.feeStatus||{term1:!1,term2:!1,term3:!1},createdAt:t.createdAt?.toDate?t.createdAt.toDate():t.createdAt?new Date(t.createdAt):new Date,updatedAt:t.updatedAt?.toDate?t.updatedAt.toDate():t.updatedAt?new Date(t.updatedAt):new Date}}),a=e.toLowerCase();return t.filter(e=>e.name.toLowerCase().includes(a)||e.rollNumber.toLowerCase().includes(a))}catch(e){return console.error("Error searching students:",e),[]}}async function d(e,t){try{let a={...t,updatedAt:new Date};if(t.name&&!t.firstName&&!t.lastName){let e=t.name.split(" ");e.length>1&&(a.firstName=e.slice(0,-1).join(" "),a.lastName=e.slice(-1).join(" "))}await (0,s.r7)((0,s.JU)(r.db,"students",e),a)}catch(e){throw console.error("Error updating student:",e),e}}async function c(e,t,a,n){try{let i=(0,s.JU)((0,s.hJ)(r.db,"attendance")),o={id:i.id,studentId:e,date:t,status:a,markedBy:n,markedAt:new Date};await (0,s.pl)(i,o)}catch(e){throw console.error("Error marking attendance:",e),e}}async function u(e){let t=new Date().getFullYear();return`${e.replace(/\s+/g,"").toUpperCase()}-${t}-${Math.floor(1e3+9e3*Math.random())}`}async function m(e){let t;let a=await u(e.classLevel);if(e.photoFile){let r=e.photoFile;if(!["image/jpeg","image/jpg","image/png"].includes(r.type))throw Error("VALIDATION_UNSUPPORTED_TYPE");if(r.size>5242880)throw Error("VALIDATION_FILE_TOO_LARGE");let s=await (0,n.Z)(r,{maxSizeMB:.25,maxWidthOrHeight:600}),i=s instanceof Blob?s:new Blob([s]),o=new FormData;o.append("image",i,`${a}.jpg`);let l=process.env.NEXT_PUBLIC_IMGBB_KEY||"eb795bdf868353332baf6495a1a83fa0",d=await fetch(`https://api.imgbb.com/1/upload?key=${l}`,{method:"POST",body:o}),c=await d.json();if(!d.ok||!c?.success)throw Error("IMGBB_UPLOAD_FAILED");if(!(t=c.data?.url))throw Error("IMGBB_NO_URL_RETURNED")}let{photoFile:o,...l}=e,d={...l,id:a,photoUrl:t,feeStatus:{term1:!1,term2:!1,term3:!1},createdAt:Date.now()};return await (0,s.pl)((0,s.JU)(r.db,"students",a),d),{student:d,qrDataUrl:await i.toDataURL(`/id/${a}`),password:a}}async function p(e){let t=await (0,s.QT)((0,s.JU)(r.db,"students",e));return t.exists()?t.data():null}async function h(e){let t=(0,s.hJ)(r.db,"students"),a=await (0,s.PL)(t),n=e.toLowerCase();return a.docs.map(e=>({...e.data(),id:e.data().id||e.id})).filter(e=>(e.firstName||"").toLowerCase().includes(n)||(e.lastName||"").toLowerCase().includes(n)||(e.id||"").toLowerCase().includes(n))}async function E(e=10,t){let a=(0,s.hJ)(r.db,"students"),n=(0,s.IO)(a,(0,s.Xo)("createdAt","desc"),(0,s.b9)(e));t&&(n=(0,s.IO)(a,(0,s.Xo)("createdAt","desc"),(0,s.TQ)(t),(0,s.b9)(e)));let i=await (0,s.PL)(n);return{students:i.docs.map(e=>({...e.data(),id:e.data().id||e.id})),cursor:i.docs.length===e?i.docs[i.docs.length-1]:null}}async function f(e,t,a){await (0,s.r7)((0,s.JU)(r.db,"students",e),{[`feeStatus.${t}`]:a})}async function w(e,t,a){if(isNaN(new Date(t).getTime()))throw Error("Invalid date");let n=t.slice(0,7),i=(0,s.JU)(r.db,"students",e,"attendance",n),o=await (0,s.QT)(i),l=o.exists()&&o.data().days||{};l[t]=a,await (0,s.pl)(i,{days:l},{merge:!0})}async function A(e,t,a){await (0,s.pl)((0,s.JU)(r.db,"students",e,"results",t),{subjects:a,updatedAt:Date.now()})}},90445:(e,t,a)=>{"use strict";let r;a.d(t,{I:()=>c,db:()=>p});var s=a(42585),n=a(46791),i=a(76),o=a(11552);let l={apiKey:process.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyD239JqpspNL_KN7-buMq2PTWUM5P0D5YA",authDomain:process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"milliniem-86b63.firebaseapp.com",projectId:process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"milliniem-86b63",storageBucket:process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"milliniem-86b63.appspot.com",messagingSenderId:process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"455693438371",appId:process.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:455693438371:web:0a64c5c007cb906e241e16",measurementId:process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-KHHJRMKW9V"},d=(0,s.C6)().length?(0,s.C6)()[0]:(0,s.ZF)(l),c=(0,n.v0)(d),u="true"===process.env.NEXT_PUBLIC_FIRESTORE_FORCE_LONG_POLLING,m="true"===process.env.NEXT_PUBLIC_FIRESTORE_AUTODETECT_STREAMING;try{u||m?(r=(0,i.LV)(d,{experimentalForceLongPolling:u,experimentalAutoDetectLongPolling:m}),console.log("[firebase] Firestore initialized with options",{forceLongPolling:u,autoDetect:m})):r=(0,i.ad)(d)}catch(e){console.error("[firebase] Firestore init error, falling back to default",e),r=(0,i.ad)(d)}let p=r;(0,o.cF)(d)},53817:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c,metadata:()=>d});var r=a(19510);a(5023),a(71159);var s=a(68570);let n=(0,s.createProxy)(String.raw`C:\Users\DELL\Documents\E-learning-1.0.0\portal-app\src\contexts\AuthContext.tsx`),{__esModule:i,$$typeof:o}=n;n.default;let l=(0,s.createProxy)(String.raw`C:\Users\DELL\Documents\E-learning-1.0.0\portal-app\src\contexts\AuthContext.tsx#AuthProvider`);(0,s.createProxy)(String.raw`C:\Users\DELL\Documents\E-learning-1.0.0\portal-app\src\contexts\AuthContext.tsx#useAuth`);let d={title:"Millenium Portal"};function c({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[r.jsx("head",{children:r.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css",integrity:"sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"})}),r.jsx("body",{className:"min-h-screen bg-slateGray",children:(0,r.jsxs)(l,{children:[r.jsx("main",{children:e}),r.jsx("footer",{className:"bg-white border-t border-gray-200 mt-20 py-10",children:(0,r.jsxs)("div",{className:"portal-container text-center text-sm text-grey",children:["\xa9 ",new Date().getFullYear()," Millenium School Portal. All rights reserved."]})})]})})]})}},5023:()=>{}};